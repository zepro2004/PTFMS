<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="https://jakarta.ee/xml/ns/jakartaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_6_0.xsd" version="6.0">

    <!-- Front Controller Servlet - handles all routing -->
    <servlet>
        <servlet-name>FrontController</servlet-name>
        <servlet-class>servlets.FrontController</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>FrontController</servlet-name>
        <url-pattern>/controller/*</url-pattern>
    </servlet-mapping>

    <!-- All servlets are declared but routed through FrontController -->

    <!-- Login Servlet -->
    <servlet>
        <servlet-name>LoginServlet</servlet-name>
        <servlet-class>servlets.LoginServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>LoginServlet</servlet-name>
        <url-pattern>/login</url-pattern>
    </servlet-mapping>

    <!-- Register Servlet -->
    <servlet>
        <servlet-name>RegisterServlet</servlet-name>
        <servlet-class>servlets.RegisterServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>RegisterServlet</servlet-name>
        <url-pattern>/register</url-pattern>
    </servlet-mapping>

    <!-- Logout Servlet -->
    <servlet>
        <servlet-name>LogoutServlet</servlet-name>
        <servlet-class>servlets.LogoutServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>LogoutServlet</servlet-name>
        <url-pattern>/logout</url-pattern>
    </servlet-mapping>

    <!-- Manager Dashboard Servlet -->
    <servlet>
        <servlet-name>ManagerDashboardServlet</servlet-name>
        <servlet-class>servlets.ManagerDashboardServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>ManagerDashboardServlet</servlet-name>
        <url-pattern>/manager-dashboard</url-pattern>
    </servlet-mapping>

    <!-- Operator Dashboard Servlet -->
    <servlet>
        <servlet-name>OperatorDashboardServlet</servlet-name>
        <servlet-class>servlets.OperatorDashboardServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>OperatorDashboardServlet</servlet-name>
        <url-pattern>/operator-dashboard</url-pattern>
    </servlet-mapping>

    <!-- Main Application Servlets - All accessed via controller/* only -->
    <servlet>
        <servlet-name>VehicleServlet</servlet-name>
        <servlet-class>servlets.VehicleServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>VehicleServlet</servlet-name>
        <url-pattern>/vehicles</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>MaintenanceServlet</servlet-name>
        <servlet-class>servlets.MaintenanceServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>MaintenanceServlet</servlet-name>
        <url-pattern>/maintenance</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>AlertServlet</servlet-name>
        <servlet-class>servlets.AlertServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>AlertServlet</servlet-name>
        <url-pattern>/alerts</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>GPSTrackingServlet</servlet-name>
        <servlet-class>servlets.GPSTrackingServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>GPSTrackingServlet</servlet-name>
        <url-pattern>/gps-tracking</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>FuelLogServlet</servlet-name>
        <servlet-class>servlets.FuelLogServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>FuelLogServlet</servlet-name>
        <url-pattern>/fuel-logs</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>ReportsServlet</servlet-name>
        <servlet-class>servlets.ReportsServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>ReportsServlet</servlet-name>
        <url-pattern>/reports</url-pattern>
    </servlet-mapping>

    <!-- Default welcome file redirects to front controller -->
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app>
